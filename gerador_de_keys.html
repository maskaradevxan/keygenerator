<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sensi CLN — Key Generator</title>

<style>
* {
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #1a0000, #000);
  color: #fff;
}

.panel {
  max-width: 1200px;
  margin: 40px auto;
  background: rgba(10,0,0,0.85);
  border-radius: 14px;
  box-shadow: 0 0 40px rgba(255,0,0,0.25);
  padding: 25px;
}

.header {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 20px;
  margin-bottom: 20px;
}

.header::before {
  content: "●";
  color: red;
}

.content {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 25px;
}

.section {
  background: rgba(0,0,0,0.6);
  border-radius: 12px;
  padding: 20px;
}

.section h3 {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 16px;
  color: #ff3c3c;
}

input, select, button {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  background: #120000;
  border: 1px solid #400000;
  border-radius: 8px;
  color: #fff;
}

button {
  cursor: pointer;
  background: linear-gradient(135deg, #8b0000, #c10000);
  transition: 0.2s;
}

button:hover {
  background: linear-gradient(135deg, #a00000, #ff1a1a);
  transform: scale(1.02);
}

.key-box {
  border: 1px solid #400000;
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 10px;
  background: rgba(0,0,0,0.7);
}

.key-box small {
  color: #ff7777;
}

.clear-keys-btn {
  width: auto;
  padding: 8px 14px;
  font-size: 13px;
  float: right;
  margin-bottom: 10px;
  box-shadow: 0 0 10px rgba(255,0,0,0.3);
}

.footer {
  margin-top: 15px;
  font-size: 12px;
  color: #aaa;
  display: flex;
  justify-content: space-between;
}
</style>
</head>

<body>

<div class="panel">
  <div class="header">Sensi CLN</div>

  <div class="content">

    <!-- GERADOR -->
    <div class="section">
      <h3>Key Generator</h3>

      <label>Prefixo</label>
      <input id="prefix" value="CLN" disabled>

      <label>Plano</label>
      <select id="plan">
        <option value="SEMANAL">Semanal</option>
        <option value="MENSAL">Mensal</option>
        <option value="LIFETIME">Lifetime</option>
      </select>

      <button onclick="generateKey()">Gerar Key</button>
    </div>

    <!-- VALIDAÇÃO / LISTA -->
    <div class="section">
      <h3>
        Keys Geradas
        <button class="clear-keys-btn" onclick="clearKeys()">Excluir todas</button>
      </h3>

      <div id="keysList"></div>
    </div>

  </div>

  <div class="footer">
    <span>Modo privado ativo</span>
    <span id="date"></span>
  </div>
</div>

<script>
const keysList = document.getElementById("keysList");

function randomBlock(size) {
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let r = "";
  for (let i = 0; i < size; i++) {
    r += chars[Math.floor(Math.random() * chars.length)];
  }
  return r;
}

function getExpiration(plan) {
  if (plan === "LIFETIME") return "Lifetime";

  const now = new Date();
  if (plan === "SEMANAL") now.setDate(now.getDate() + 7);
  if (plan === "MENSAL") now.setMonth(now.getMonth() + 1);

  return now.toLocaleDateString("pt-BR");
}

function generateKey() {
  const prefix = "CLN";
  const plan = document.getElementById("plan").value;

  const key =
    `${prefix}-${plan}-` +
    `${randomBlock(4)}-${randomBlock(4)}-${randomBlock(4)}`;

  const exp = getExpiration(plan);

  const data = {
    key,
    plan,
    exp
  };

  const saved = JSON.parse(localStorage.getItem("generatedKeys") || "[]");
  saved.unshift(data);
  localStorage.setItem("generatedKeys", JSON.stringify(saved));

  renderKeys();
}

function renderKeys() {
  keysList.innerHTML = "";
  const saved = JSON.parse(localStorage.getItem("generatedKeys") || "[]");

  saved.forEach(k => {
    const div = document.createElement("div");
    div.className = "key-box";
    div.innerHTML = `
      <strong>${k.key}</strong><br>
      <small>${k.plan} • Expira em: ${k.exp}</small>
    `;
    keysList.appendChild(div);
  });
}

function clearKeys() {
  if (!confirm("Tem certeza que deseja excluir TODAS as keys?")) return;
  localStorage.removeItem("generatedKeys");
  renderKeys();
  alert("Todas as keys foram excluídas.");
}

document.getElementById("date").innerText =
  new Date().toLocaleString("pt-BR");

renderKeys();
</script>

</body>
</html>
